<html>
<head>
	<script src="js/nsUtil.js"></script>
	<script src="js/nsBinding.js"></script>
	<style>
	.red
	{
		color:red;
	}
	
	.blue
	{
		color:blue;
	}
	</style>
</head>
<body>

<div id="myDiv">
	<span>{{abc}}</span>
	<span>{{tempName.abc}}</span>
 	<input type="text" value="{{tempName.name}}">
	<span data-nsbind-style="color:{{tempColor}}">{{tempName.name}}</span>
	<input type="text" onchange="{{nameChange}}"></input>
	<button onclick="changeColor()">Click</button>
	<button onclick="changeArray()">Change</button>
	<button onclick="changeArraySource()">Change Array Source</button>
	<button onclick="addArray()">Add Array Record</button>
	<ul>
          <li nsbind-repeater="{{country in countries}}">
            <strong>  Country Name : </strong> {{country..name}} -
            <strong>  Country Code : </strong> {{country..code}}
			<strong>  color : </strong> {{tempColor}}
            <input type="text" value="{{country..name}}">
            <input type="text" value="{{country..code}}">
          </li>
    </ul>
</div>

<script>
	var x = new NSArray([{name:"Anurag",value:"A"},{name:"Anurag1",value:"A1"},{name:"Anurag2",value:"A2"}]);
	x.addEventListener("itemadded", function(e) {
	    console.log("Added %o at index %d.", e.item, e.index);
	  });
	x.addEventListener("itemadded", function(e) {
	    console.log("Added %o at index %d.", e.item, e.index);
	  });

	  x.addEventListener("itemset", function(e) {
	    console.log("Set index %d to %o.", e.index, e.item);
	  });

	  x.addEventListener("itemremoved", function(e) {
	    console.log("Removed %o at index %d.", e.item, e.index);
	  });
	 
	  //console.log("popping and unshifting...");
	  x.unshift(x.pop());

	  //console.log("updated array: %o", x.slice());

	  //console.log("reversing array...");
	  //console.log("updated array: %o",x.reverse().slice() );
	  x.reverse().slice()

	  //console.log("splicing...");
	  x.splice(1, 2, {name:"Anurag3",value:"A3"});
	  //console.log("setting index 2...");
	  x[2] = {name:"Anurag4",value:"A4"};

	  //console.log("setting length to 10...");
	  x.length = 10;
	  //console.log("updated array: %o", x.slice());

	  //console.log("setting length to 2...");
	  x.length = 2;

	  //console.log("extracting first element via shift()");
	  x.shift();

	  //console.log("updated array: %o", x.slice());
	
	
	var objData = {};
	function loadHandler(event) 
	{
		objData = {name:"Anurag",tempColor:"red",tempClass:"red"};
		objData["tempName"] = {name:"Anurag",tempColor:"red"};
		objData["countries"] = [{
	          name: 'Afghanistan',
	          code: 'AF'
	        }, {
	          name: 'Aland Islands',
	          code: 'AX'
	        }, {
	          name: 'Albania',
	          code: 'AL'
	        }, {
	          name: 'Algeria',
	          code: 'DZ'
	        }, {
	          name: 'American Samoa',
	          code: 'AS'
	        }, {
	          name: 'AndorrA',
	          code: 'AD'
	        }, {
	          name: 'Angola',
	          code: 'AO'
	        }, {
	          name: 'Anguilla',
	          code: 'AI'
	        }, {
	          name: 'Antarctica',
	          code: 'AQ'
	        }, {
	          name: 'Antigua and Barbuda',
	          code: 'AG'
	        }, {
	          name: 'Argentina',
	          code: 'AR'
	     	}];
		objData["nameChange"] = function(event)
		{
			var text = event.target.value;
			objData["name"] = text;
		}
		//var nsMvc = new NSBinding("myDiv",objData);
		//console.log(document.querySelector('[data-ns-container]') || document.querySelector('[ns-container]'));
	}
	
	function nameChange(event)
	{
		var text = event.target.value;
		objData["name"] = text;
	}
	
	function changeColor()
	{
		objData["tempColor"] = "blue";
		//objData["tempClass"] = "blue";
		objData["tempName"]["name"] = "Var";
	}
	
	function changeArray()
	{
		objData["countries"].splice(2, 0, {name:"India",code:"IN"}); 
		//objData["countries"].push({name:"India",code:"IN"});
		//objData["countries"][2]["code"] = "aa";
		//objData["abc"] = "efg";
		//objData["tempName"]["abc"] = "efg";
		//objData["countries"][2]["code"] = "aa";
	}
	
	function changeArraySource()
	{
		objData["countries"] = [{
	          name: 'Afghanistan',
	          code: 'AF'
	        }, {
	          name: 'Aland Islands',
	          code: 'AX'
	        }];
	}
	
	function addArray()
	{
		objData["countries"][11] = {
	          name: 'India',
	          code: 'IND'
	        };
	}
    
	window.addEventListener('load', loadHandler);
	
</script>
</body>
</html>
