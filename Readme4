NSUtil.prototype.localStorage = function()
{
	this.util = new NSUtil();
	this.STORAGE_PREFIX = "nsStorage";
	this.setData = function(key,data) 
	{
	    if (this.isAPISupported() && key) 
	    {
	    	var calcKey = this.__getKey(key);
	    	var item = data;
	    	this.removeData(calcKey);
	    	if(item && !this.util.isString(item) && this.__isJSONSupported())
	    	{
	    		item = JSON.stringify(item);
	    	}
	    	localStorage.setItem(calcKey,item);
	    	return true;
	    }
	    return false;
	};
	
	this.getData = function(key) 
	{
		if (this.isAPISupported() && key) 
		{
			var item = localStorage.getItem(this.__getKey(key));
		    if (item) 
		    {
		    	if(this.__isJSONSupported())
		    	{
		    		return JSON.parse(item);
		    	}
		    	else
		    	{
		    		return item;
		    	}
		    	
		    }
	    }
	    return null;
	};
	
	this.removeData = function(key) 
	{
		if (this.isAPISupported() && key) 
		{
			localStorage.removeItem(this.__getKey(key));
			return true;
	    }
		return false;
	};
	
	this.removeAll = function()
	{
		if (this.isAPISupported()) 
		{
			var callBack = function(key)
			{
				this.removeData(key);
			};
			this.__manipulateAllKeys(callBack.bind(this));
		}
	};
	
	this.isAPISupported = function()
	{
		if (!window.localStorage || !window.JSON) 
		{
	        return false;
	    }
		 return true;
	};
	
	this.__isJSONSupported = function()
	{
		if (!window.JSON) 
		{
	        return false;
	    }
		 return true;
	};
	
	this.__manipulateAllKeys = function(callBack) 
	{
		if(callBack)
		{
			var keyRegex = new RegExp("^" + this.STORAGE_PREFIX + "(.*)");
			for (var count = localStorage.length-1; count >= 0 ; --count) 
			{
			      var key = localStorage.key(count);
			      key = key && key.match(keyRegex);
			      key = key && key[1];
			      if (key && key.indexOf(this.STORAGE_PREFIX) < 0) 
			      {
			    	  callBack(key);
			      }
			}
		}
	};
	
	this.__getKey = function(key)
	{
		return (this.STORAGE_PREFIX + key);
	};
};

button type="button" onclick="saveState();">Save State</button>
{headerText:"Price",dataField:"price",width:"20%",sortable:true,sortDescending:true,priority:5},
"Â£" + 
var util = dgDemo.util;
					var localStorageUtil = new util.localStorage();
					var state = localStorageUtil.getData("nsGrid");
					dgDemo.setState(state);
function saveState()
		{
			var dgDemo = document.getElementById("dgDemo");
			var state = dgDemo.getState();
			var util = dgDemo.util;
			var localStorageUtil = new util.localStorage();
			localStorageUtil.setData("nsGrid",state);
		}
