NSUtil.prototype.getMaxZIndex = function (element) 
{
    var currentzIndex = -1;
    var maxZIndex = 0;
    var checkZIndex = function(currElement)
    {
    	currentzIndex = document.defaultView.getComputedStyle(currElement,null).getPropertyValue("z-index");
    	currentzIndex = parseInt(currentzIndex, 10);
    	maxZIndex = (currentzIndex) ? Math.max(maxZIndex, currentzIndex) : maxZIndex;
    };
    if(element)
    {
    	var currentElement = element;
        while(currentElement)
        {
        	checkZIndex(currentElement);
            currentElement = currentElement.offsetParent;
        }
    }
    else
    {
    	var arrElements = document.getElementsByTagName("*");
        var length = arrElements.length;
        for (var count = 0; count < length; count++) 
        {
        	checkZIndex(arrElements[count]);
        }
    }
    return maxZIndex;
};
